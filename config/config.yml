# ==============================================================================
# 목적 : Configuration 파일
# 최초 작업자 : (AI솔루션/박태원)
# 최초 작업일 : 2026-01-15
# AI 활용 여부 :
# ==============================================================================

paths:
  data_folder: "/mnt/d/스마트제조혁신기술개발/postprocess-data"
  input_pdf: "기능성 가공 기술 실무 테스트.pdf"
  output_dir: "scratch"

render:
  scale: 3.0

cache:
  use_md_cache: True

vlm:
  url: "http://localhost:11434"
  model: "deepseek-ocr:latest"
  api_key: ""
  timeout_sec: 3600

prompt_ocr: |
  <image>
  <|grounding|>Convert the document to markdown.

generation:
  max_tokens: 2048
  temperature: 0.0

image_desc:
  enabled: True
  max_tokens: 512
  temperature: 0.0

prompt_img_desc: |
  <image>
  Describe this image in detail.
  
opensearch:
  url: "http://localhost:9200"
  text_index: "chunks"
  image_index: "images"
  table_index: "tables"
  images_staging_index: "images_staging"
  pages_staging_index: "pages_staging"
  tables_staging_index: "tables_staging"
  bulk_size: 500
  # username: "admin"
  # password: "Atech1221!@"
  # verify_certs: false

embed_text:
  expected_dim: 4096
  max_batch_size: 8
  model: "qwen3-embedding:8b"
  timeout_sec: 120
  truncate: True
  ollama_base_url: "http://localhost:11434"

embed_image:
  expected_dim: 1024
  dimension: 1024
  max_images_per_requests: 16
  retry_once: True
  model: null
  timeout_sec: 60
  batch_size: 16
  throtthle_sec: 0.02
  base_url: "http://127.0.0.1:8008/embed"

qdrant:
  url: "http://localhost:6333"
  collection: "pdf_chunks_v1_vec"
  distance: "COSINE"

neo4j:
  enabled: True
  uri: "bolt://localhost:7687"
  username: "neo4j"
  password: "12341234"
  database: "neo4j"

postgres:
  enabled: true
  dsn: "postgresql://postgres:postgres@localhost:5432/postgres"
  connect_timeout_sec: 10

minio:
  endpoint: "localhost:9000"
  access_key: "minio"
  secret_key: "miniostorage"
  bucket: "raw-documents"
  secure: False

ingest:
  batch_size_opensearch: 500
  batch_size_qdrant: 256
  pipeline_version: null
  config_hash: null

chunking:
  max_chunk_chars: 1200
  min_chunk_chars: 80
  join_target_chars: 900

image_crop:
  pad_ratio: 0.02

debug:
  draw_bboxes: False

image_filter:
  enabled: true
  stddev_min: 2.0
  mode: "grayscale"